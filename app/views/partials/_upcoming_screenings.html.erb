<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<script>
    var drawGoogleMap = function() {
      console.log('hello!');
      var markers = <%=raw @screenings_gmaps_hash.to_json %>;
      handler = Gmaps.build('Google', { markers: { clusterer: undefined  }});
      handler.buildMap({ provider: {scrollwheel: false}, internal: {id: 'map'}}, function(){
        markers = handler.addMarkers(markers);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    };
</script>
<script src="//maps.google.com/maps/api/js?v=3.25&key=AIzaSyDmFUNlvJlxVV7ahDAV4kWLB3vom6Ttr9w&callback=drawGoogleMap" async defer></script>

<!-- Screening Container -->
<section class="screening-container" id="screenings">
    <div id="tourscreenings"></div>
    <div id="communityscreenings"></div>
    <div class="screening-wrapper">
        <h3>Upcoming Screenings</h3>

        <div class='screening-map' style='width: 100%;'>
          <div id="map" style='width: 100%; height: 400px;'></div>
        </div>

        <div class="screening-table" data-category="Screening Section" data-label="Host Screenings List" onclick="ganalytics(this);">
            <table class="screening-tablerow">
              <tbody>
                  <%= render partial: 'screening', collection: @screenings %>
                </tbody>
            </table>
        </div>
    </div>
</section>
<!-- End of Screenings Container -->
